let menuToggle=document.querySelector(".header__menu-toggle"),menu=document.querySelector(".header__menu");menuToggle.addEventListener("click",function(){menuToggle.classList.toggle("header__menu-toggle_open"),menu.classList.toggle("header__menu_active"),document.body.classList.toggle("hidden")});let casesNamesHeight,casesContents=document.getElementsByClassName("cases__content"),casesNames=document.querySelectorAll(".cases__name"),setAdaptiveHeight=function(){for(item of(casesNamesHeight=[],casesContents))casesNamesHeight.push(item.offsetHeight);casesNames.forEach((e,t)=>{e.style.height=`${casesNamesHeight[t]}px`})};document.addEventListener("readystatechange",()=>{window.innerWidth>768&&setAdaptiveHeight()}),window.addEventListener("resize",function(){window.innerWidth>768?setAdaptiveHeight():casesNames.forEach(e=>{e.style.height=""})});let tab=function(){let e,t=document.querySelectorAll(".cases__name"),n=document.querySelectorAll(".cases__content");function o(){t.forEach(e=>{e.classList.remove("cases__name_is-active")}),this.classList.add("cases__name_is-active"),function(e){n.forEach(t=>{t.classList.contains(e)?t.classList.add("cases__content_is-active"):t.classList.remove("cases__content_is-active")})}(e=this.getAttribute("data-tab-name"))}t.forEach(e=>{e.addEventListener("click",o)})};tab();let housesGroup=document.querySelector(".houses__group"),housesMore=document.querySelector(".houses__more");const updateScrollPercentage=function(){let e=housesGroup.scrollHeight-housesGroup.clientHeight,t=Math.floor(100*housesGroup.scrollTop/e,1),n=Math.floor(housesGroup.clientHeight*t/100,1);n>=housesGroup.clientHeight-housesMore.clientHeight&&(n-=housesMore.clientHeight),housesMore.style.top=`${housesGroup.scrollTop+n}px`};housesGroup&&housesGroup.addEventListener("scroll",updateScrollPercentage);let up=document.querySelector(".gallery__arrow_up"),down=document.querySelector(".gallery__arrow_down"),gallery=document.querySelector(".gallery__group");down&&down.addEventListener("click",()=>gallery.scrollBy(0,300)),up&&up.addEventListener("click",()=>gallery.scrollBy(0,-300));let kindGroup=document.querySelector(".kind__slider"),kindMainItem=document.querySelector(".kind__main-img"),kindTargets=document.querySelectorAll(".kind__text"),showActiveImg=function(e,t){e.setAttribute("src",t)},changeImg=function(e){let t=e.target.closest(".kind__text");kindTargets.forEach(e=>{e.classList.remove("kind__text_act")}),t.classList.add("kind__text_act");let n=t.dataset.src;showActiveImg(kindMainItem,n),kindMainItem.classList.contains("fadeIn")&&kindMainItem.classList.toggle("fadeIn"),setTimeout(()=>{kindMainItem.classList.toggle("fadeIn")},0)};if(kindGroup){showActiveImg(kindMainItem,"img/kind/kind2.jpg"),kindGroup.addEventListener("click",changeImg.bind(kindGroup))}let btnMore=document.querySelector(".ceo__more"),text=document.querySelector(".ceo__text_black");btnMore&&btnMore.addEventListener("click",function(){text.classList.toggle("ceo__text_hid"),"читать дальше"===btnMore.innerHTML?btnMore.innerHTML="скрыть":btnMore.innerHTML="читать дальше"});let projectLink=document.querySelector("#project"),footerSubmenu=document.querySelector(".footer__submenu");projectLink&&projectLink.addEventListener("click",function(){projectLink.classList.toggle("footer__title-item_open"),footerSubmenu.classList.toggle("footer__submenu_vis")}),$(document).ready(function(){function e(){$(".projects__main-slider")&&$(".projects__main-slider").slick({infinite:!0,slidesToScroll:1})}$('input[type="tel"]').length&&$('input[type="tel"]').mask("+7 (999) 999-99-99"),$(".excursion__form")&&$(".excursion__form").validate({rules:{name:{required:!0,minlength:2},phone:{required:!0,minlength:10}},messages:{name:{required:"",minlength:""},phone:{required:"",minlength:""}},errorClass:"invalid"}),$(".contacts__form")&&$(".contacts__form").validate({rules:{name1:{required:!0,minlength:2},phone1:{required:!0,minlength:10}},messages:{name1:{required:"",minlength:""},phone1:{required:"",minlength:""}},errorClass:"invalid"}),$(".projects__slider")&&$(".projects__slider").slick({centerMode:!0,centerPadding:"50px",slidesToShow:2}),$(".township__slider")&&$(".township__slider").slick({centerMode:!0,centerPadding:"30px",slidesToShow:4,responsive:[{breakpoint:901,settings:{slidesToShow:3}},{breakpoint:501,settings:{slidesToShow:1,centerMode:!1,centerPadding:"50px",variableWidth:!1}}]}),$(".invest-banner__slider")&&(console.log(),$(".invest-banner__slider").slick({slidesToShow:4,variableWidth:!0,responsive:[{breakpoint:901,settings:{slidesToShow:1,centerMode:!1,variableWidth:!1}}]})),$(window).width()<=768&&e(),$(window).resize(function(){$(window).width()<=768?(e(),$(".gallery__mb")&&$(".gallery__mb").slick()):($(".projects__main-slider").slick("unslick"),$(".gallery__mb").slick("unslick"))}),$(".projects__main-slider").on("afterChange",function(e,t){let n=t.slideCount,o=t.currentSlide+1;$(".projects__count").html(o+"/"+n)}),$(window).width()<=768&&$(".gallery__mb")&&$(".gallery__mb").slick(),$(".township-info__slider")&&$(".township-info__slider").slick()});let blockMap=document.querySelector(".contacts-map");function init(){var e=new ymaps.Map("contacts-map",{center:[55.76,37.64],zoom:12,controls:["geolocationControl","fullscreenControl"]},{geolocationControlFloat:"right"});e.geoObjects.options.set({iconLayout:"default#image",iconImageHref:"../img/point.svg",iconImageSize:[56,67],iconImageOffset:[-28,-67]});let t=new ymaps.Placemark([55.78,37.64],{hintContent:"Это хинт2",balloonContent:"Это балун2"});e.geoObjects.add(t)}blockMap&&console.log("have"),ymaps.ready(init),ymaps.ready(initMain);let colorEstate="#4BA55E",colorEstate1="#000";function initMain(){var e=new ymaps.Map("map",{center:[55.76,37.64],zoom:11},{searchControlProvider:"yandex#search"}),t=new ymaps.GeoObjectCollection(null,{preset:"islands#yellowIcon"}),n=new ymaps.GeoObjectCollection(null,{preset:"islands#blueIcon"}),o=new ymaps.Placemark([55.76,37.64],{hintContent:"Наш ЖК",balloonContentHeader:"Наш ЖК",balloonContentBody:"Красивый и удобный",balloonContentFooter:"Все вопросы по телефону"},{iconLayout:"default#image",iconImageHref:"../img/point.svg",iconImageSize:[56,67],iconImageOffset:[-28,-67]});function i(e,o,i){for(var s=0,l=o.length;s<l;s++)switch(e.add(new ymaps.Placemark([o[s].latitude,o[s].longitude],{hintContent:o[s].hintContent,balloonContent:o[s].balloonContent,iconCaption:o[s].hintContent},{iconColor:i,strokeColor:i})),e){case n:document.querySelector('img[data-type="kindergartenCollection"]').nextSibling.insertAdjacentHTML("beforeend",` <li class="map-block__subcol-li" data-id="${s}" data-coords="${o[s].latitude},${o[s].longitude}">${o[s].hintContent}</li>`);break;case t:document.querySelector('img[data-type="shopCollection"]').nextSibling.insertAdjacentHTML("beforeend",` <li class="map-block__subcol-li" data-id="${s}" data-coords="${o[s].latitude},${o[s].longitude}">${o[s].hintContent}</li>`);break;default:console.log("Нет таких значений")}}function s(e,t){for(let n=0;n<e.getLength();n++)e.get(n).geometry.getCoordinates().toString()===t.dataset.coords&&e.get(n).balloon.open()}i(t,[{latitude:55.79,longitude:37.64,hintContent:"Фермерская лавка",balloonContent:"В 10 минутах ходьбы"},{latitude:55.768,longitude:37.64,hintContent:"Школа Дзюдо",balloonContent:"В 10 минутах ходьбы \n Работает 24/7"}],colorEstate),i(n,[{latitude:55.748,longitude:37.64,hintContent:"Школа 123",balloonContent:"Kindergarten 10 минутах ходьбы \n Работает 24/7"},{latitude:55.768,longitude:37.7,hintContent:"Дет сад",balloonContent:"placemarksKindergarten В 10 минутах ходьбы \n Работает 24/7"}],colorEstate1),e.geoObjects.add(o).add(t).add(n),document.querySelectorAll(".map-block__subcol-li").forEach(function(e){e.addEventListener("click",function(){switch(e.closest(".map-block__subcol-list").previousSibling.dataset.type){case"kindergartenCollection":s(n,e);break;case"shopCollection":s(t,e);break;default:alert("К сожалению, по данному месту не найдена информация")}})})}